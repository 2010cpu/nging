var App=function(){var l={tooltip:true,popover:true,nanoScroller:true,nestableLists:true,hiddenElements:true,bootstrapSwitch:true,dateTime:true,select2:true,tags:true,slider:true};var t=function(){$(".wizard-ux").wizard();$(".wizard-ux").on("changed",function(){$(".bslider").slider()});$(".wizard-next").click(function(t){$(".wizard-ux").wizard("next");t.preventDefault()});$(".wizard-previous").click(function(t){$(".wizard-ux").wizard("previous");t.preventDefault()})};function r(t){var e=$("#sidebar-collapse")[0];var a=$("#cl-wrapper");if(a.hasClass("sb-collapsed")){$(".fa",e).addClass("fa-angle-left").removeClass("fa-angle-right");a.removeClass("sb-collapsed")}else{$(".fa",e).removeClass("fa-angle-left").addClass("fa-angle-right");a.addClass("sb-collapsed")}}function e(){var a=window.location.pathname.replace(/^\//,"").replace(/[^\w]/g,"-")+"-"+window.location.search.replace(/[^\w]/g,"_");$(".page-aside").each(function(t){var e=$(this);$(this).find(".header > .collapse-button").on("click",function(){e.addClass("collapsed");store.set(a+".page-aside-"+t,"collapsed");e.trigger("collapsed");n(0)});$(this).children(".collapsed-button").on("click",function(){e.removeClass("collapsed");store.set(a+".page-aside-"+t,"");e.trigger("expanded");n(280)});if(store.get(a+".page-aside-"+t)=="collapsed"){$(this).trigger("click")}})}function a(){var t=$("#main-container > .page-aside");var e=t.width();if(e<270){t.find(".header > .collapse-button").trigger("click");return}n(e)}function n(t){var e=$("#cl-wrapper > .cl-sidebar").width();var a=$(window).width();var n=a-e-t;n-=80;$("#cl-wrapper > .cl-body .table-responsive").each(function(){if($(this).children("table").width()>n){$(this).addClass("overflow").css("max-width",n)}else{$(this).removeClass("overflow")}})}var s=$("<div id='sub-menu-nav' style='position:fixed;z-index:9999;'></div>");function o(t,e){if(($("#cl-wrapper").hasClass("sb-collapsed")||$(window).width()>755&&$(window).width()<963)&&$("ul",t).length>0){$(t).removeClass("ocult");var a=$("ul",t);if(!$(".dropdown-header",t).length){var n='<li class="dropdown-header">'+$(t).children().html()+"</li>";a.prepend(n)}s.appendTo("body");var i=$(t).offset().top+8-$(window).scrollTop();var o=$(t).width();s.css({top:i,left:o+8});s.html('<ul class="sub-menu">'+a.html()+"</ul>");s.show();a.css("top",i)}else{s.hide()}}var c=null;return{clientID:{},i18n:{SYS_INFO:"System Information",UPLOAD_ERR:"Upload Error"},lang:"en",langInfo:function(){if(c!=null)return c;var t=App.lang.split("-",2);c={encoding:t[0],country:""};if(t.length>1)c.country=t[1].toUpperCase();return c},langTag:function(){var t=App.langInfo();if(t.country)return t.encoding+"-"+t.country;return t.encoding},initTool:function(){s.hover(function(t){$(this).addClass("over")},function(){$(this).removeClass("over");s.fadeOut("fast")});$(document).click(function(){s.hide()});$(document).on("touchstart click",function(t){s.fadeOut("fast")});s.click(function(t){t.stopPropagation()})},initLeftNav:function(){$(".cl-vnavigation li ul").each(function(){$(this).parent().addClass("parent")});$(".cl-vnavigation li ul li.active").each(function(){$(this).parent().show().parent().addClass("open")});if(!$(".cl-vnavigation").data("initclick")){$(".cl-vnavigation").data("initclick",true);$(".cl-vnavigation").delegate(".parent > a","click",function(t){$(".cl-vnavigation .parent.open > ul").not($(this).parent().find("ul")).slideUp(300,"swing",function(){$(this).parent().removeClass("open")});var e=$(this).parent().find("ul");e.slideToggle(300,"swing",function(){var t=$(this).parent();if(t.hasClass("open")){t.removeClass("open")}else{t.addClass("open")}$("#cl-wrapper .nscroller").nanoScroller({preventPageScrolling:true})});t.preventDefault()})}$(".cl-vnavigation li").hover(function(t){o(this,t)},function(t){s.removeClass("over");setTimeout(function(){if(!s.hasClass("over")&&!$(".cl-vnavigation li:hover").length>0){s.hide()}},500)});$(".cl-vnavigation li").click(function(t){if(($("#cl-wrapper").hasClass("sb-collapsed")||$(window).width()>755&&$(window).width()<963)&&$("ul",this).length>0&&!($(window).width()<755)){o(this,t);t.stopPropagation()}})},initLeftNavAjax:function(t,e){App.markNavByURL(t);App.attachPjax(e,{onclick:function(t){if($(t).data("marknav")){App.unmarkNav($(t),$(t).data("marknav"));App.markNav($(t),$(t).data("marknav"))}},onend:function(t,e,a){a.container.find('[data-popover="popover"]').popover();a.container.find('.ttip, [data-toggle="tooltip"]').tooltip()}});App.attachAjaxURL(e)},init:function(t){$.extend(l,t);App.initLeftNav();App.initTool();$(".cl-toggle").click(function(t){var e=$(".cl-vnavigation");e.slideToggle(300,"swing",function(){});t.preventDefault()});$("#sidebar-collapse").click(function(){r()});if($("#cl-wrapper").hasClass("fixed-menu")){var i=$("#cl-wrapper .menu-space");i.addClass("nano nscroller");function e(){var t=$("#cl-wrapper .collapse-button");var e=t.outerHeight();var a=$("#head-nav").height();var n=$(window).height()-(t.is(":visible")?e:0)-a;i.css("height",n);$("#cl-wrapper .nscroller").nanoScroller({preventPageScrolling:true})}$(window).resize(function(){e()});e();$("#cl-wrapper .nscroller").nanoScroller({preventPageScrolling:true})}var a=220;var n=500;var o=$('<a href="#" class="back-to-top"><i class="fa fa-angle-up"></i></a>');o.appendTo("body");$(window).scroll(function(){if($(this).scrollTop()>a){$(".back-to-top").fadeIn(n)}else{$(".back-to-top").fadeOut(n)}});$(".back-to-top").click(function(t){t.preventDefault();$("html, body").animate({scrollTop:0},n);return false});if($(".ui-datepicker").length>0)$(".ui-datepicker").datepicker();if(l.tooltip){$('.ttip, [data-toggle="tooltip"]').tooltip()}if(l.popover){$('[data-popover="popover"]').popover()}if(l.nanoScroller){$(".nscroller").nanoScroller()}if(l.nestableLists&&$(".dd").length>0){$(".dd").nestable()}if(l.bootstrapSwitch){if($(".switch:not(.has-switch)").length>0)$(".switch:not(.has-switch)").bootstrapSwitch()}if(l.dateTime){if($(".datetime").length>0)$(".datetime").datetimepicker({autoclose:true})}if(l.select2){if($(".select2").length>0)$(".select2").select2({width:"100%"})}if(l.tags){if($(".tags").length>0)$(".tags").select2({tags:0,width:"100%"})}if(l.slider){if($(".bslider").length>0)$(".bslider").slider()}if(l.hiddenElements){$(".dropdown").on("shown.bs.dropdown",function(){$(".nscroller").nanoScroller()});$(".nav-tabs").on("shown.bs.tab",function(t){$(".nscroller").nanoScroller()})}},pageAside:function(t){e(t)},tableReponsiveInit:function(t){a(t)},tableReponsive:function(t){n(t)},toggleSideBar:function(){r()},wizard:function(){t()},markNavByURL:function(t){if(t==null)t=window.location.pathname;App.markNav($('#leftnav a[href="'+t+'"]'),"left");App.markNav($('#topnav a[href="'+t+'"]'),"top")},markNav:function(t,e){if(t.length>0){var a=t.parent("li").addClass("active");switch(e){case"left":a.parent(".from-left").show().parent("li").addClass("open");break;case"top":a.parent(".from-top").parent("li").addClass("active").siblings("li.active").removeClass("active");break}}},unmarkNav:function(t,e){var a=t.parent("li");var n=a.siblings("li.active");if(n.length>0){n.removeClass("active")}else{switch(e){case"left":if(a.parent("ul.sub-menu").length>0){var i=$(".col-menu-2").children("li.open");if(i.length>0)i.removeClass("open").find("li.active").removeClass("active")}$("#leftnav > .open").removeClass("open").children("ul.sub-menu").hide().children("li.active").removeClass("active");$("#leftnav .active").removeClass("active");break;case"top":var o=a.parent("ul.dropdown-menu.from-top");if(o.length>0){n=o.parent("li").addClass("active").siblings("li.active")}if(n.length>0){n.removeClass("active").children("ul.dropdown-menu.from-top").children("li.active").removeClass("active")}break}}},message:function(t,e){var a={title:App.i18n.SYS_INFO,text:"",image:"",class_name:"clean",sticky:false};if(typeof t!="object")t={text:t};if(typeof t.type!="undefined"&&t.type)t.class_name=t.type;t=$.extend({},a,t||{});switch(t.class_name){case"dark":case"primary":case"clean":case"info":if(t.title)t.title='<i class="fa fa-info-circle"></i> '+t.title;break;case"error":t.class_name="danger";case"danger":if(t.title)t.title='<i class="fa fa-comment-o"></i> '+t.title;break;case"warning":if(t.title)t.title='<i class="fa fa-warning"></i> '+t.title;break;case"success":if(t.title)t.title='<i class="fa fa-check"></i> '+t.title;break}if(e!=null)t.sticky=e;$.gritter.add(t)},attachAjaxURL:function(t){if(t==null)t=document;$(t).on("click","[data-ajax-url]",function(){var t=$(this).data("ajax-url"),e=$(this).attr("title");if(!e)e=$(this).text();$.get(t,{},function(t){App.message({title:e,text:t,time:5e3,sticky:false})},"html")})},attachPjax:function(t,e,i){if(!$.support.pjax)return;if(t==null)t="a";if(i==null)i=5e3;var a={onclick:null,onsend:null,oncomplete:null,ontimeout:null,onstart:null,onend:null};var o=$.extend({},a,e||{});$(document).on("click",t+"[data-pjax]",function(t){var e=$(this).data("pjax"),a=$(this).data("keepjs");var n=$(this).data("onclick");$.pjax.click(t,$(e),{timeout:i,keepjs:a});if(o.onclick)o.onclick(this);if(n&&typeof window[n]=="function")window[n](this)}).on("pjax:send",function(t,e,a){App.loading("show");if(o.onsend)o.onsend(t,e,a)}).on("pjax:complete",function(t,e,a,n){App.loading("hide");if(o.oncomplete)o.oncomplete(t,e,a,n)}).on("pjax:timeout",function(t,e,a){console.log("timeout");App.loading("hide");if(o.ontimeout)o.ontimeout(t,e,a)}).on("pjax:start",function(t,e,a){if(o.onstart)o.onstart(t,e,a)}).on("pjax:end",function(t,e,a){App.loading("hide");if(o.onend)o.onend(t,e,a);var n=a.container.attr("id");if(n){App.bottomFloat("#"+n+" .pagination");App.bottomFloat("#"+n+" .form-submit-group",0,true);$("#"+n+" .switch:not(.has-switch)").bootstrapSwitch()}if(a.type=="GET")$("#global-search-form").attr("action",a.url)})},wsURL:function(t){var e="ws:";if(window.location.protocol=="https:")e="wss:";var a=String(t).indexOf("//");if(a==-1){t=e+"//"+window.location.host+t}else{t=e+String(t).substring(a)}return t},websocket:function(e,t,a){t=App.wsURL(t);var n=new WebSocket(t);n.onopen=function(t){console.log("Websocket Server is connected");if(a!=null&&$.isFunction(a))a.apply(this,arguments)};n.onclose=function(t){console.log("Websocket Server is disconnected")};n.onmessage=function(t){e(t.data)};n.onerror=function(t){console.dir(t)};if(a!=null&&typeof a=="object"){n=$.extend({},n,a)}return n},notifyListen:function(){var s={notify:0,element:0,modal:0},c={notify:20,element:50,modal:50};App.websocket(function(t){var e=$.parseJSON(t);if(typeof App.clientID["notify"]=="undefined"){App.clientID["notify"]=e.client_id}switch(e.mode){case"-":break;case"element":var a=$("#notify-element-"+e.type);if(a.length<1){var n="recv_notice_"+e.type;if(typeof window[n]!="undefined"){return window[n](e)}if(e.status>0){console.info(e.content)}else{console.error(e.content)}return}if(s[e.mode]>=c[e.mode]){a.find("li:first").remove()}if(e.title){var i="badge-danger";if(e.status>0)i="badge-success";t='<span class="badge '+i+'">'+App.text2html(e.title)+"</span> "+App.text2html(e.content)}else{t=App.text2html(e.content)}a.append("<li>"+t+"</li>");s[e.mode]++;break;case"modal":var a=$("#notify-modal-"+e.type);if(a.length<1){var n="recv_notice_"+e.type;if(typeof window[n]!="undefined"){return window[n](e)}if(e.status>0){console.info(e.content)}else{console.error(e.content)}return}if(e.title){var i="badge-danger";if(e.status>0)i="badge-success";t='<span class="badge '+i+'">'+App.text2html(e.title)+"</span> "+App.text2html(e.content)}else{t=App.text2html(e.content)}if(!a.data("shown")){s[e.mode]=0;a.data("shown",true);var o=a.find(".modal-body"),l=o.children("ul.modal-body-ul");if(l.length<1){o.html('<ul class="modal-body-ul" id="notify-modal-'+e.type+'-container"><li>'+t+"</li></ul>")}else{l.html("<li>"+t+"</li>")}a.niftyModal("show",{afterOpen:function(t){},afterClose:function(t){a.data("shown",false)}})}else{var r=$("#notify-modal-"+e.type+"-container");if(s[e.mode]>=c[e.mode]){r.find("li:first").remove()}r.append("<li>"+t+"</li>")}s[e.mode]++;break;case"notify":default:if("notify"!=e.mode)e.mode="notify";var a=$("#notice-message-container");if(a.length<1){App.message({title:App.i18n.SYS_INFO,text:'<ul id="notice-message-container" class="no-list-style" style="max-height:500px;overflow-y:auto;overflow-x:hidden"></ul>'});a=$("#notice-message-container")}if(s[e.mode]>=c[e.mode]){a.find("li:first").remove()}if(e.title){var i="badge-danger";if(e.status>0)i="badge-success";t='<span class="badge '+i+'">'+App.text2html(e.title)+"</span>"+App.text2html(e.content)}else{t=App.text2html(e.content)}a.append("<li>"+t+"</li>");s[e.mode]++;break}},BACKEND_URL+"/user/notice")},text2html:function(t){return String(t).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />").replace(/  /g,"&nbsp; ").replace(/\t/g,"&nbsp; &nbsp; ")},checkedAll:function(t,e){return $(e).prop("checked",$(t).prop("checked"))},attachCheckedAll:function(t,e,a){$(t).on("ifChecked ifUnchecked click",function(){App.checkedAll(this,e);if(a)$(a).text($(e+":checked").length)})},alertBlock:function(t,e,a){switch(a){case"info":if(e==null)e="Info!";return'<div class="alert alert-info">\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\t\t\t\t\t\t\t\t<i class="fa fa-info-circle sign"></i><strong>'+e+"</strong> "+t+"</div>";case"warn":if(e==null)e="Alert!";return'<div class="alert alert-warning">\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\t\t\t\t\t\t\t\t<i class="fa fa-warning sign"></i><strong>'+e+"</strong> "+t+"</div>";case"error":if(e==null)e="Error!";return'<div class="alert alert-danger">\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\t\t\t\t\t\t\t\t<i class="fa fa-times-circle sign"></i><strong>'+e+"</strong> "+t+"</div>";default:if(e==null)e="Success!";return'<div class="alert alert-success">\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\t\t\t\t\t\t\t\t<i class="fa fa-check sign"></i><strong>'+e+"</strong> "+t+"</div>"}},alertBlockx:function(t,e,a){switch(a){case"info":if(e==null)e="Info!";return'<div class="alert alert-info alert-white rounded">\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\t\t\t\t\t\t\t\t<div class="icon"><i class="fa fa-info-circle"></i></div>\t\t\t\t\t\t\t\t<strong>'+e+"</strong> "+t+"</div>";case"warn":if(e==null)e="Alert!";return'<div class="alert alert-warning alert-white rounded">\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\t\t\t\t\t\t\t\t<div class="icon"><i class="fa fa-warning"></i></div>\t\t\t\t\t\t\t\t<strong>'+e+"</strong> "+t+"</div>";case"error":if(e==null)e="Error!";return'<div class="alert alert-danger alert-white rounded">\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\t\t\t\t\t\t\t\t<div class="icon"><i class="fa fa-times-circle"></i></div>\t\t\t\t\t\t\t\t<strong>'+e+"</strong> "+t+"</div>";default:if(e==null)e="Success!";return'<div class="alert alert-success alert-white rounded">\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\t\t\t\t\t\t\t\t<div class="icon"><i class="fa fa-check"></i></div>\t\t\t\t\t\t\t\t<strong>'+e+"</strong> "+t+"</div>"}},showDbLog:function(t,e){if(e==null)e=".block-flat:first";if(typeof t.length=="undefined")t=[t];for(var a=0;a<t.length;a++){var n=t[a];var i=n.Started;if(n.SQLs&&n.SQLs.length>0){for(var o=0;o<n.SQLs.length;o++)i+='<code class="wrap">'+n.SQLs[o]+"</code>"}else{i+='<code class="wrap">'+n.SQL+"</code>"}var l="success";if(n.Error){i+="("+n.Error+")";l="error"}else{i+="("+n.Elapsed+")"}$(e).before(App.alertBlockx(i,null,l))}},loading:function(t){var e=$("#loading-status");switch(t){case"show":if(e.length>0){e.show()}else{$("body").append('<div id="loading-status"><i class="fa fa-spinner fa-spin fa-3x"></i></div>')}break;case"hide":if(e.length>0){e.hide()}}},insertAtCursor:function(t,e,a,n){if(typeof TextAreaEditor!="undefined"){TextAreaEditor.setSelectText(t,e,a,n);return}if(document.selection){t.focus();sel=document.selection.createRange();sel.text=e;sel.select()}else if(t.selectionStart||t.selectionStart=="0"){var i=t.selectionStart;var o=t.selectionEnd;var l=t.scrollTop;t.value=t.value.substring(0,i)+e+t.value.substring(o,t.value.length);if(l>0)t.scrollTop=l;t.focus();t.selectionStart=i+e.length;t.selectionEnd=i+e.length}else{t.value+=e;t.focus()}},searchFS:function(t,i,o,l,r){if(i==null)i=10;if(l==null)l=BACKEND_URL+"/user/autocomplete_path";$(t).typeahead({hint:true,highlight:true,minLength:1},{source:function(t,e,a){var n={query:t,size:i,type:o};$.ajax({url:l,type:"get",data:r?r(n):n,dataType:"json",async:false,success:function(t){var a=[];if(!t.Data)return;$.each(t.Data,function(t,e){a.push(e)});e(a)}})},limit:i})},randomString:function(t){t=t||32;var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";var a=e.length;var n="";for(i=0;i<t;i++){n+=e.charAt(Math.floor(Math.random()*a))}return n},bottomFloat:function(t,o,l){if($(t).length<1)return;if(o==null)o=0;$(t).not("[disabled-fixed]").each(function(){var e=this;var t=$(e).height()+o;var a=$(e).offset().top+t;var n=$(e).outerWidth(),i=$(e).outerHeight();if(!l)l=$(e).data("auto-width");if(l)$(e).css("width",n);$(window).on("scroll",function(){var t=$(this).scrollTop()+$(window).height();if(t>=a){if($(e).hasClass("always-bottom")){$(e).removeClass("always-bottom");$(e).next(".fixed-placeholder").hide()}return}if(!$(e).hasClass("always-bottom")){$(e).addClass("always-bottom");if($(e).next(".fixed-placeholder").length>0){$(e).next(".fixed-placeholder").show()}else{$(e).after('<div style="width:'+n+"px;height:"+i+'px" class="fixed-placeholder"></div>')}}})});$(window).trigger("scroll")},topFloat:function(t,o,l){if($(t).length<1)return;if(o==null)o=0;$(t).not("[disabled-fixed]").each(function(){var e=this;var a=$(e).offset().top;var n=$(e).outerWidth(),i=$(e).outerHeight();if(!l)l=$(e).data("auto-width");if(l)$(e).css("width",n);$(window).on("scroll",function(){var t=$(this).scrollTop();if(t<=a){if($(e).hasClass("always-top")){$(e).removeClass("always-top");$(e).next(".fixed-placeholder").hide()}return}if(!$(e).hasClass("always-top")){$(e).addClass("always-top").css("top",o);if($(e).next(".fixed-placeholder").length>0){$(e).next(".fixed-placeholder").show()}else{$(e).after('<div style="width:'+n+"px;height:"+i+'px" class="fixed-placeholder"></div>')}}})});$(window).trigger("scroll")},topFloatThead:function(t,s){if($(t).length<1)return;if(s==null)s=0;$(t).not("[disabled-fixed]").each(function(){$(this).attr("disabled-fixed","fixed");var n=this;var e=$(n).offset().top,t=$(n).data("copy");if(t){$("#tableCopy"+t).remove()}else{t=Math.random();$(n).data("copy",t)}var l=$('<table class="'+$(n).parent("table").attr("class")+' always-top" style="background-color:white" id="tableCopy'+t+'"></table>');var r=$(n).clone();l.append(r);l.data("offset-left",$(n).offset().left);var a=function(){var i=r.find("td,th"),o=$(n).find("td,th");o.each(function(t){var e=i.eq(t),a=e.find("input:checkbox");if(a.length>0){var n=o.find("input:checkbox");a.each(function(t){n.eq(t).on("click change",function(){a.prop("checked",$(this).prop("checked"))})})}e.css("width",$(this).width())});var t=$(n).offset().left;var e=$(n).outerWidth(),a=$(n).outerHeight();l.css({top:s,left:t,width:e,height:a})};a();l.hide();$("body").append(l);$(window).on("scroll",function(){if(l.data("offset-left")!=$(n).offset().left)a();var t=$(this).scrollTop();if(t<=e)return l.hide();l.show()})});$(window).trigger("scroll")},getImgNaturalDimensions:function(t,e){if(!t.naturalWidth){e({w:t.naturalWidth,h:t.naturalHeight});return}var a=new Image;a.onload=function(){e({w:a.width,h:a.height})};a.src=t.src},reportBug:function(t){$.post(t,{panic:$("#panic-content").html(),url:window.location.href},function(t){},"json")},replaceURLParam:function(t,e,a){if(a==null)a=window.location.href;e=encodeURIComponent(e);var n=String(a).indexOf("?");if(n<0)return a+"?"+t+"="+e;var i=a.substring(n),o=new RegExp("([\\?&]"+t+"=)[^&]*(&|$)");if(!o.test(i))return a+"&"+t+"="+e;a=a.substring(0,n);i=i.replace(o,"$1"+e+"$2");return a+i},switchLang:function(t){window.location=App.replaceURLParam("lang",t)},extends:function(t,e){var a=function(){};a.prototype=e.prototype;t.prototype=new a;t.prototype.constructor=t},formatBytes:function(t,e){if(e==null)e=1;var a=parseInt(t);var n=" B";if(a>1024){a/=1024;n=" KB"}if(a>1024){a/=1024;n=" MB"}if(a>1024){a/=1024;n=" GB"}if(a>1024){a/=1024;n=" TB"}if(a>1024){a/=1024;n=" PB"}return a.toFixed(e)+n},genTable:function(t){var e='<table class="table table-bordered no-margin">';var a="<thead>",n="<tbody>";for(var i=0;i<t.length;i++){var o=t[i];if(i==0){for(var l in o)a+='<th class="'+l+'"><strong>'+l+"</strong></th>"}n+="<tr>";for(var l in o)n+='<td class="'+l+'">'+o[l]+"</td>";n+="</tr>"}a+="</thead>";n+="</tbody>";e+=a+n+"</table>";return e},logShow:function(t,e,n){if(!$("#log-show-modal").data("init")){$("#log-show-modal").data("init",true);$(window).off().on("resize",function(){$("#log-show-modal").css({height:$(window).height(),width:"100%","max-width":"100%",left:0,top:0,transform:"none"});$("#log-show-modal").find(".md-content").css("height",$(window).height());$("#log-show-content").css("height",$(window).height()-200)});$("#log-show-last-lines").on("change",function(t){var e=$(this).data("target");if(!e)return;var a=$(this).val();e.data("last-lines",a);e.trigger("click")});$("#log-show-modal .modal-footer .btn-refresh").on("click",function(t){var e=$("#log-show-last-lines").data("target");if(!e)return;e.trigger("click")});$(window).trigger("resize")}if(n==null)n="";var a=function(t){var e=$(t).data("url");var a=$(t).data("last-lines");if(a==null)a=100;$("#log-show-last-lines").data("target",$(t));$("#log-show-modal").niftyModal("show",{afterOpen:function(t){$.get(e,{lastLines:a,pipe:n},function(t){if(t.Code==1){var e=$("#log-show-modal .modal-header .modal-subtitle");if(typeof t.Data.title!="undefined"){if(t.Data.title)t.Data.title=" ("+t.Data.title+")";e.html(t.Data.title)}else{e.empty()}if(typeof t.Data.list!="undefined"){var a='<div class="table-responsive" id="log-show-content">'+App.genTable(t.Data.list)+"</div>";$("#log-show-content").parent(".modal-body").css("padding",0);$("#log-show-content").replaceWith(a)}else{$("#log-show-content").text(t.Data.content)}$(window).trigger("resize");var n=$("#log-show-content")[0];n.scrollTop=n.scrollHeight}else{$("#log-show-content").text(t.Info)}},"json")},afterClose:function(t){}})};if(e)return a(t);$(t).on("click",function(){a(this)})},tableSorting:function(o){o=o==null?"":o+" ";$(o+'[sort-current!=""]').each(function(){var t=$(this).attr("sort-current");var e=$(this).find('[sort="'+t+'"]');var a="fa-arrow-down",n="fa-arrow-up";if(e.length<1){a="fa-arrow-up";n="fa-arrow-down";e=$(this).find('[sort="-'+t+'"]')}if(e.length>0){var i=e.children(".fa");if(i.length<1){e.append('<i class="fa '+a+'"></i>')}else{i.removeClass(n).addClass(a)}}$(o+"[sort-current] [sort]").css("cursor","pointer").on("click",function(t){var e=$(this).parents("[sort-current]");var a=e.attr("sort-current");var n=e.attr("sort-url")||window.location.href;var i=e.attr("sort-trigger");var o=$(this).attr("sort");if(a&&(a==o||a=="-"+o)){var l=/^\-/;a=l.test(a)?a.replace(l,""):"-"+a}else{a=o}n=App.replaceURLParam("sort",a,n);if(i){e.trigger("sort")}else{var r=e.attr("sort-setto");if(r){$(r).load(n)}else{window.location=n}}})})}}}();$(function(){$("body").css({opacity:1,"margin-left":0})});