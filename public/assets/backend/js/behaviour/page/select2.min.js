App.select2={i18n:{TAG_INPUT:"请输入或选择标签，如有多个用空格隔开",TAG_SELECT:"请输入关键词后从搜索列表中选择",SELECT:"请选择"},tags:function(t,e,a,n,l){if(e==null)e=$(t).data("tags")||[];if(a==null)a=$(t).data("url");if(n==null)n=$(t).data("sortable")||false;if(l==null)l=$(t).data("onlyselect")||false;var i=$(t).data("single")||false;if(i)i=App.parseBool(i);var r={multiple:!i,width:"100%"};if(l){r.minimumInputLength=1;r.placeholder=App.select2.i18n.TAG_SELECT;r.data=e;r.tags=true}else{r.placeholder=App.select2.i18n.TAG_INPUT;r.tags=e;r.tokenSeparators=[","," "]}if(a){switch(typeof a){case"string":var s=$(t).data("listkey")||"list";r.query=App.select2.buildQueryFunction(a,{},s);break;default:if($.isArray(a)){var s=a.length>2?a[2]:$(t).data("listkey")||"list";r.query=App.select2.buildQueryFunction(a[0],a[1],s);break}r.ajax=a;break}}var u=$(t).select2(r);$(t).data("select2",u);var o=$(t).data("init");if(o)$(t).val(o.split(",")).trigger("change");if(!n)return;$(t).on("change",function(){var e;if(typeof t=="string"&&t.indexOf("#")===0){e=t+"_val"}else{e=$(t).attr("id")+"_val"}$(e).html($(t).val())});$(t).select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){$(t).select2("onSortStart")},update:function(){$(t).select2("onSortEnd")}})},select:function(e,t){var a={placeholder:App.select2.i18n.SELECT,width:"100%",minimumInputLength:3};t=$.extend({},a,t||{});var n=$(e).select2(t);$(e).data("select2",n)},update:function(e,t){$(e).select2("data",t)},enable:function(e,t){$(e).prop("disabled",!t)},readonly:function(e,t){$(e).prop("disabled",t)},buildQueryFunction:function(e,t,n){if(n==null)n="list";return function(a){t.q=a.term;t.select2=1;$.get(e,t,function(e){if(e.Code!=1){App.message({title:App.i18n.SYS_INFO,text:e.Info,type:"error"},false);return}var t={results:e.Data[n]};a.callback(t)},"json")}},buildAjaxOptions:function(e,l){if(l==null)l="list";var t={url:"",dataType:"json",quietMillis:250,data:function(e,t){return{q:e,page:t,select2:1}},results:function(e,t){if(e.Code!=1){App.message({title:App.i18n.SYS_INFO,text:e.Info,type:"error"},false);return{results:[],more:false}}var a=e.Data;var n=t<a.pagination.pages;return{results:a[l],more:n}}};return $.extend({},t,e||{})}};