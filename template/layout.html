<!DOCTYPE html>
{{$name:=""}}
{{$breadcrumb:=""}}
<html lang="{{Lang}}">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="{{"Caddy服务器管理面板登录"|T}}">
	<meta name="author" content="admpub">
	<link rel="shortcut icon" href="__ASSETS__/images/favicon.png">
	<title>{{Block "title"}}Start{{/Block}} - CaddyUI</title>
	<link href='__ASSETS__/css/font_OpenSans400_300_600_400italic_700_800.css' rel='stylesheet' type='text/css' />
	<link href='__ASSETS__/css/font_Raleway_300_200_100.css' rel='stylesheet' type='text/css' />

	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="__ASSETS__/js/bootstrap/dist/css/bootstrap.css" />
	
	<link rel="stylesheet" href="__ASSETS__/js/jquery.gritter/css/jquery.gritter.css" />
	<link rel="stylesheet" href="__ASSETS__/fonts/font-awesome-4/css/font-awesome.min.css" />
    
    <link rel="stylesheet" href="__ASSETS__/js/jquery.nanoscroller/nanoscroller.css" />
    <link rel="stylesheet" href="__ASSETS__/js/bootstrap.switch/bootstrap-switch.css" />

	
    {{Block "head"}}{{/Block}}
	<!-- Custom styles for this template -->
	<link href="__ASSETS__/css/style.css" rel="stylesheet" />
</head>
 
<body{{Block "bodyAttr"}}{{/Block}}>
    {{Include "header"}}
	<div id="cl-wrapper">
		{{Include "sidebar"}}
		<div class="container-fluid" id="pcont">
			{{if or $name $breadcrumb}}
			<div class="page-head">
				<h2>{{$name}}</h2>
				<ol class="breadcrumb">
				  <li><a href="/manage">Home</a></li>
				  {{if $breadcrumb}}
				  	{{$l := Sub (len $breadcrumb) 1}}
				  	{{range $k,$v:=$breadcrumb}}
				  		{{if eq $k $l}}
				  		<li class="active">{{$v}}</li>
				  		{{else}}
				  		<li><a href="#">{{$v}}</a></li>
				  		{{end}}
				  	{{end}}
				  {{end}}
				</ol>
			</div>
			{{else if hasAnyBlock "name" "breadcrumb"}}
			<div class="page-head">
				<h2>{{Block "name"}}{{/Block}}</h2>
				<ol class="breadcrumb">
				  {{Block "breadcrumb"}}
				  <li><a href="/manage">Home</a></li>
				  {{/Block}}
				</ol>
			</div>
			{{end}}
		    <div class="cl-mcont">{{Block "main"}}{{/Block}}</div>
		</div>
	</div>

<script src="__ASSETS__/js/jquery.js"></script>

<script src="__ASSETS__/js/modernizr.js" type="text/javascript"></script>
<script type="text/javascript" src="__ASSETS__/js/jquery.nanoscroller/jquery.nanoscroller.js"></script>
<script type="text/javascript" src="__ASSETS__/js/bootstrap.switch/bootstrap-switch.min.js"></script>
<!--<script type="text/javascript" src="__ASSETS__/js/jquery.nestable/jquery.nestable.js"></script>-->

<script type="text/javascript" src="__ASSETS__/js/behaviour/general.js"></script>
<script type="text/javascript" src="__ASSETS__/js/jquery.gritter/js/jquery.gritter.js"></script>
<script src="__ASSETS__/js/behaviour/voice-commands.js"></script>
<script src="__ASSETS__/js/bootstrap/dist/js/bootstrap.min.js"></script>
<script>
$(function(){
	App.init();
	App.markNav({{if Stored.Get "activeURL"}}'{{Stored.Get "activeURL"}}'{{else}}null{{end}});
	App.attachAjaxURL();
	{{if and . (or (IsError .) (IsOk .))}}App.message({title: '{{"系统消息"|T}}', text: "{{.}}"});{{end}}
	var messageCount=0,messageMax=20;
	App.websocket(function(message){
		var c=$('#notice-message-container');
		if(c.length<1){
			App.message({title: '{{"系统消息"|T}}', text: '<ul id="notice-message-container" class="no-list-style" style="max-height:500px;overflow-y:auto;overflow-x:hidden"></ul>'});
			c=$('#notice-message-container');
		}
		if(messageCount>=messageMax){
			c.find('li:first').remove();
		}
		var m=$.parseJSON(message);
		if(m.title){
			var badge='badge-danger';
			if(m.status==1){
				badge='badge-success';
			}
			message='<span class="badge '+badge+'">'+m.title+'</span>'+m.content;
		}else{
			message=m.content;
		}
		c.append('<li>'+App.text2html(message)+'</li>');
		messageCount++;
	},'/manage/notice');
});
</script>
{{Block "footer"}}{{/Block}}
</body>
</html>
